<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Pelanggan dan Umum</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="text-center">Pelanggan dan Data Umum</h2>

        <!-- Tambah Pelanggan -->
        <div class="card mb-5">
            <div class="card-header">Tambah Pelanggan</div>
            <div class="card-body">
                <form id="pelangganForm">
                    <div class="mb-3">
                        <label for="kategoriPelanggan" class="form-label">Kategori Pelanggan</label>
                        <select class="form-select" id="kategoriPelanggan" required>
                            <option value="" disabled selected>Pilih Kategori</option>
                            <option value="Umum">Umum</option>
                            <option value="Member">Member</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="nama" class="form-label">Nama Pelanggan</label>
                        <input type="text" class="form-control" id="nama" placeholder="Masukkan Nama" required>
                    </div>
                    <div class="mb-3">
                        <label for="noHp" class="form-label">Nomor Handphone</label>
                        <input type="tel" class="form-control" id="noHp" placeholder="Masukkan Nomor Handphone" required>
                    </div>
                    <div class="mb-3">
                        <label for="alamat" class="form-label">Alamat</label>
                        <textarea class="form-control" id="alamat" placeholder="Masukkan Alamat" rows="3" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Simpan Pelanggan</button>
                </form>
            </div>
        </div>

        <!-- Halaman Data Umum -->
        <div class="card mb-5">
            <div class="card-header">Data Umum</div>
            <div class="card-body">
                <h4>Daftar Pelanggan Umum</h4>
                <table class="table table-striped" id="dataUmumTable">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Nama</th>
                            <th>No Handphone</th>
                            <th>Alamat</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Daftar Pelanggan -->
        <div class="card">
            <div class="card-header">Daftar Semua Pelanggan</div>
            <div class="card-body">
                <h4>Daftar Pelanggan</h4>
                <table class="table table-striped" id="dataPelangganTable">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Kategori</th>
                            <th>Nama</th>
                            <th>No Handphone</th>
                            <th>Alamat</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Inisialisasi data pelanggan
        const pelangganList = JSON.parse(localStorage.getItem('pelanggan')) || [];

        // Fungsi simpan pelanggan
        function simpanPelanggan(event) {
            event.preventDefault();

            const kategori = document.getElementById('kategoriPelanggan').value;
            const nama = document.getElementById('nama').value;
            const noHp = document.getElementById('noHp').value;
            const alamat = document.getElementById('alamat').value;

            const pelanggan = {
                id: 'PL-' + Date.now(),
                kategori,
                nama,
                noHp,
                alamat
            };

            pelangganList.push(pelanggan);
            localStorage.setItem('pelanggan', JSON.stringify(pelangganList));
            renderPelanggan();
            renderDataUmum();
            document.getElementById('pelangganForm').reset();
        }

        // Fungsi render pelanggan
        function renderPelanggan() {
            const dataPelangganTable = document.querySelector('#dataPelangganTable tbody');
            dataPelangganTable.innerHTML = '';

            pelangganList.forEach((pelanggan, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${pelanggan.kategori}</td>
                    <td>${pelanggan.nama}</td>
                    <td>${pelanggan.noHp}</td>
                    <td>${pelanggan.alamat}</td>
                `;
                dataPelangganTable.appendChild(row);
            });
        }

        // Fungsi render data umum
        function renderDataUmum() {
            const dataUmumTable = document.querySelector('#dataUmumTable tbody');
            dataUmumTable.innerHTML = '';

            const pelangganUmum = pelangganList.filter(pelanggan => pelanggan.kategori === 'Umum');
            pelangganUmum.forEach((pelanggan, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${pelanggan.nama}</td>
                    <td>${pelanggan.noHp}</td>
                    <td>${pelanggan.alamat}</td>
                `;
                dataUmumTable.appendChild(row);
            });
        }

        // Event listener simpan pelanggan
        document.getElementById('pelangganForm').addEventListener('submit', simpanPelanggan);

        // Render data awal
        renderPelanggan();
        renderDataUmum();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
